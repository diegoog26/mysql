create database cadastro; /*criar banco de dados*/

use cadastro; 
/*Selecionar o banco*/

create table pessoas(
	nome varchar(30), 
    idade tinyint(3),
    sexo varchar(1),
    peso float,
    altura float,
    nacionalidade varchar(20) 
); 
/*Criar a tabela e as entidades*/ 

/*Estrutura da tabela*/
describe pessoas;

/*Apagar TODO o banco de dados*/
drop database cadastro;

================================================================
create database cadastro 
default character set utf8 
default collate utf8_general_ci;

use cadastro;

create table pessoas(
id int not null auto_increment,
nome varchar(30) not null,
nascimento date,
sexo enum('f', 'm'),
peso decimal(5,2),
altura decimal(3,2),
nacionalidade varchar(20)default 'Brasil',
primary key(id)
)default charset = utf8;

/*
DDL - DEFINIÇÃO (Data Definition Language) 
	create database
    create table
	alter table
	drop table
DML - MANIPULAÇÃO
DQL- SOLICITAÇÕES
*/ 

/*Inserir registros na tabela*/
insert into pessoas
(id, nome, nascimento, sexo, peso, altura, nacionalidade)
values
('1', 'Diego Galdino', '2007-06-26', 'm', '58.00', '1.80', 'Brasil');

/*Ver os registros da tabela*/
select * from pessoas; 

/*Alterar a tabela e adicionar coluna*/
alter table pessoas
add column profissao varchar(20);

/*Alterar tabela e excluir coluna*/
alter table pessoas
drop column profissao;

/*Adicionar coluna depois ou antes de outra coluna*/
alter table pessoas
add column profissao varchar(20) after nome;

/*Adicionar a coluna e colocar em primeiro*/
alter table pessoas
add column codigo int first;

/*Modifica a coluna*/
alter table pessoas
modify column profissao varchar(20) not null default '';

/*Modifica o nome da coluna*/
alter table pessoas 
change column profissao prof varchar(20);

/*Muda o nome da tabela*/
alter table pessoas
rename estudantes;

/*Apaga a coluna*/
alter table teste
drop column telefone;

/*Alterar o registro*/
update cursos
set nome = 'Excel Essencial'
where idcursos = 2;

/*Deleta o registro*/
delete from cursos
where idcursos = '28';

/*Apaga os registros*/
truncate table cursos;

select nome, carga from cursos
where ano <= '2025'
order by nome;

select * from cursos
where nome like 'd%';

select * from cursos
where nome = 'Excel';

select nome, nascimento from estudantes
where nascimento between '2000-01-01' and '2013-12-31';

select sum(carga) from cursos
where ano = '2025';

select max(carga) from cursos
where ano = '2025';

select avg(totalaulas) from cursos
where ano = '2025';

select count(nome) from estudantes
where sexo = 'f' and altura > '1.60';

select carga, totalaulas from cursos
where totalaulas
group by carga;

select ano, count(*) from cursos
group by ano
order by ano;

select carga, count(*) from cursos
group by ano
having carga > 24;

select avg(carga) from cursos;

select carga, count(*)from cursos
where ano >= '2025'
group by carga
having carga > (select avg(carga) from cursos);

desc estudantes;
desc cursos;

/*Criar a chave estrangeira*/
alter table estudantes
add column cursoprefere int;

/*Transformar em chave estrangeira*/ 
alter table estudantes
add foreign key (cursoprefere)
references cursos(idcursos);

update estudantes set cursoprefere = '2'
where id = '1';

select nome, cursoprefere from estudantes
order by cursoprefere;

select estudantes.nome, estudantes.cursoprefere, cursos.nome, cursos.ano
from estudantes inner join cursos
on idcursos = cursoprefere
order by cursoprefere;

select e.nome, c.nome
from estudantes as e inner join cursos as c
on c.idcursos = e.cursoprefere
order by e.nome;

select estudantes.nome, cursos.nome, estudantes.cursoprefere
from estudantes RIGHT outer join cursos
on idcursos = cursoprefere
order by cursos.nome;
